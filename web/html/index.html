<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>wichess index</title>
    <link rel="stylesheet" type="text/css" href="/css/gamesboard.css">
    <style>
        div {
            text-align: center;
            margin: auto;
            width: 80%;
        }
        .inline {
            display: inline;
            border: solid black 1px;
            padding: 10px;
        }
        .spacer {
            height: 20px;
        }
        table {
            border-collapse: collapse;
        }
    </style>
    <script type="text/javascript" src="/js/jquery-2.2.0.min.js"></script>
    <script type="text/javascript">
    var pointselected = null;
    $(document).ready(function() {
        var board = '';
        board += '<table id="grid">';
        for (var yrr = 7; yrr >= 0; yrr--) {
            board += '<tr>';
            for (var xcf = 0; xcf < 8; xcf++) {
                board += '<td id="point'+(xcf+(yrr*8))+'" class="point"></td>';
            }
            board += '</tr>';
        }
        board += '</table>';
        $('#games').html(board);

        for (var i = 0; i < 64; i++) {
            $('#point'+i).click({pointIndex: i}, function(eventData) {
                var newpointselected = $('#point'+eventData.data.pointIndex);
                if (newpointselected.is(pointselected)) {
                    $('#navigation').html('');
                    pointselected.toggleClass('selected');
                    pointselected = null;
                    return;
                }
                if (pointselected != null) {
                    pointselected.toggleClass('selected');
                }
                pointselected = newpointselected;
                $('#navigation').html('<input type="button" onclick="location.href='+eventData.data.pointIndex+'" value="Go To Board" class="travelbutton"/>');
                pointselected.toggleClass('selected');
            });
        }
    });
    </script>
</head>

<body>
    <div class="spacer"></div>
    <div>
        <div class="inline">{{.Wins}} Wins / {{.Losses}} Losses</div>
        <div class="inline">Best Piece ({{.BestPieceName}}) has {{.BestPieceTakes}} Takes</div>
    </div>
    <div class="spacer"></div>
    <div>
        <div id="games"></div>
    </div>
    <div class="spacer"></div>
    <div id="navigation"></div>
    <div class="spacer"></div>
    <div>{{.Name}}</div>
</body>
</html>
