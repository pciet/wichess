<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>wichess game</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Libre+Baskerville">
    <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/css/body.css">
    <style>
    body {
        font-size: 2vw;
        padding: 0px;
        margin: 0px;
        border: 0px;
        white-space: nowrap;
        overflow: hidden;
    }
    .inlinediv {
        display: inline-block;
        vertical-align: top;
    }
    .container {
        display: inline-block;
        height: 100vh;
        margin: 0px auto;
        padding: 16px;
        border: 0px;
    }
    .dataline {
        height: 54px;
    }
    .dataline2 {
        height: 108px;
    }
    #acknowledge {
        display: block;
    }
    #backandsound {
        display: block;
    }
    #indicators {
        display: table;
        border-collapse: collapse;
        margin: 8px;
        width: 100%;
    }
    .indicatorrow {
        display: table-row;
    }
    #rightcontainer {
        vertical-align: top;
    }
    .playerinfo {
        width: 100%;
        text-align: center;
        margin: 0px;
        padding: 8px;
        display: table;
        background-color: #cc785c;
        color: #fb835e;
        border-radius: 10px;
    }
    .playerinforow {
        margin: 0px;
        border: 0px;
        padding: 0px;
        display: table-row;
        word-wrap: break-word;
        white-space: normal;
        vertical-align: middle;
    }
    .playerinfocell {
        display: table-cell;
        vertical-align: middle;
    }
    .indicator {
        font-size: 1.8vw;
        border-radius: 10px;
        text-align: center;
        vertical-align: middle;
        width: 50%;
        display: table-cell;
        margin: 4px;
        background-color: #cc785c;
        color: #fb835e;
        padding: 4px;
        /* https://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css */
        -webkit-touch-callout: none; /* iOS Safari */
        -webkit-user-select: none; /* Safari */
        -khtml-user-select: none; /* Konqueror HTML */
        -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
        user-select: none; /* Non-prefixed version, currently supported by Chrome and Opera */
        cursor: default;
    }
    .indicating {
        background-color: #d4cca5;
        color: #825444;
    }
    #gainedpiece {
        width: 50%;
    }
    #notificationarea {
        display: block;
    }
    #acknowledge {
        display: block;
        vertical-align: top;
        margin: 0.3em;
    }
    #backandsound {
        display: block;
        width: 100%;
        margin: 0.3em;
    }
    #soundbuttons {
        margin-left: 1em;
        /* https://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css */
        -webkit-touch-callout: none; /* iOS Safari */
        -webkit-user-select: none; /* Safari */
        -khtml-user-select: none; /* Konqueror HTML */
        -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
        user-select: none; /* Non-prefixed version, currently supported by Chrome and Opera */
        cursor: default;
    }
    #grid {
        border: 0px;
        padding: 0;
        vertical-align: middle;
        table-layout: fixed;
        border-collapse: collapse;
        margin: 0 auto;
        outline: 7px outset #d4cca5;
    }
    tr {
        padding: 0px;
        margin: 0px;
        height: 54px;
    }
    .point {
        padding: 0px;
        margin: 0px;
        width: 54px;
        background-color: white;
    }
    .even {
        background-color: #e1e1e1;
    }
    .odd {
        background-color: #f3f3f3;
    }
    .promotion {
        margin: 1em;
    }
    .promb {
        font-size: 11px;
    }
    .pieceimg {
        width: 48px;
        height: 48px;
        vertical-align: top;
    }
    .hovered {
        outline: 2px solid #fb835e;
        outline-offset: -1px;
    }
    .hoveredopp {
        outline: 2px dotted #fb835e;
        outline-offset: -1px;
    }
    .selected {
        outline: 2px solid #fb835e;
        outline-offset: -1px;
    }
    .selectedopp {
        outline: 2px dotted #fb835e;
        outline-offset: -1px;
    }

    input {
        border-radius: 5px;
        box-shadow: 0px 1px 1px black;
        margin: 0 auto;
        font-size: 1.7vw;
    }
    .clock {
        font-family: 'Inconsolata', monospace;
        /* https://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css */
        -webkit-touch-callout: none; /* iOS Safari */
        -webkit-user-select: none; /* Safari */
        -khtml-user-select: none; /* Konqueror HTML */
        -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
        user-select: none; /* Non-prefixed version, currently supported by Chrome and Opera */
        cursor: default;
    }
    .clocking {
        background-color: #d4cca5;
        color: #825444;
    }
    </style>
    <script type="text/javascript" src="/js/jquery-2.2.0.min.js"></script>
    <script type="text/javascript" src="/js/moment.min.js"></script>
    <script type="text/javascript" src="/js/duration.js"></script>
    <script type="text/javascript" src="/js/pieces.js"></script>
    <script type="text/javascript">
    var SoundCount = 325;
    var Muted = false;

    var game_id = {{.ID}};
    var Player = {{.Name}};

    var TotalTime = Duration.parse({{.TotalTime}});
    var TurnTime = Duration.parse({{.TurnTime}});
    var NowTime = moment({{.NowTime}});

    var WhiteLatestMove = moment({{.WhiteLatestMove}});
    var WhiteElapsed = Duration.parse({{.WhiteElapsed}});
    var BlackLatestMove = moment({{.BlackLatestMove}});
    var BlackElapsed = Duration.parse({{.BlackElapsed}});

    var NowDifference = moment.duration(moment().diff(NowTime));

    var PlayerOrientation;
    var Opponent = '';
    var White = '';
    var Black = '';
    var Turn = '';

    var Board = null;
    var Selected = null;
    var Moves = null;

    var EasyComputer = 'Easy Computer Player';
    var HardComputer = 'Hard Computer Player';

    var WhiteTimer, BlackTimer;

    var ws = new WebSocket("ws://localhost:8080/moven/"+game_id);
    ws.onmessage = function(event) {
        makeMove(JSON.parse(event.data));
    }
    function setPieceImage(index, kind, orientation) {
        $('#point'+index).html('<img class="pieceimg" src="/img/'+imageNameForKind(kind, index, orientation)+'">');
    }
    function unsetPieceImage(index) {
        $('#point'+index).html('');
    }
    function requestMove(from, to) {
        $.post('/move/'+game_id, {From: from, To: to}).done(makeMove);
    }
    var promotionButtons = '<input type="button" class="promb" value="Queen" onclick="promote('+k.QUEEN+');"/> <input type="button" class="promb" value="Rook" onclick="promote('+k.ROOK+');"/> <input type="button" class="promb" value="Bishop" onclick="promote('+k.BISHOP+');"/> <input type="button" class="promb" value="Knight" onclick="promote('+k.KNIGHT+');"/>';
    function promote(kind) {
        var from = 0;
        if (Player == White) {
            for (var i = 56; i < 64; i++) {
                var piece = Board[i];
                if ((piece.Base == k.PAWN) && (piece.Orientation == o.WHITE)) {
                    from = i;
                    break;
                }
            }
        } else {
            for (var i = 0; i < 8; i++) {
                var piece = Board[i];
                if ((piece.Base == k.PAWN) && (piece.Orientation == o.BLACK)) {
                    from = i;
                    break;
                }
            }
        }
        $.post('/move/'+game_id, {From: from, Kind: kind}).done(makeMove);
    }
    function makeMove(diff) {
        if (Object.keys(diff).length > 0) {
            if (TurnTime.milliseconds() > 0) {
                if (Turn == o.WHITE) {
                    clearInterval(WhiteTimer);
                    $('#whiteclock').removeClass('clocking').html(millisecondsToClock(TurnTime.valueOf()-1000));
                    $('#blackclock').addClass('clocking');
                    WhiteLatestMove = moment();
                    BlackTimer = setInterval(function() {
                        updateClock(o.BLACK);
                    }, 1000);
                } else {
                    clearInterval(BlackTimer);
                    $('#blackclock').removeClass('clocking').html(millisecondsToClock(TurnTime.valueOf()-1000));
                    $('#whiteclock').addClass('clocking');
                    BlackLatestMove = moment();
                    WhiteTimer = setInterval(function() {
                        updateClock(o.WHITE);
                    }, 1000);
                }
            } else if (TotalTime.milliseconds() > 0) {
                if (Turn == o.WHITE) {
                    if (NowTime.isAfter(BlackLatestMove)) {
                        WhiteElapsed = Duration.parse((WhiteElapsed.milliseconds() + moment().diff(NowTime).valueOf())+'ms');
                    } else {
                        WhiteElapsed = Duration.parse((WhiteElapsed.milliseconds() + moment().diff(BlackLatestMove))+'ms');
                    }
                    clearInterval(WhiteTimer);
                    $('#whiteclock').removeClass('clocking');
                    $('#blackclock').addClass('clocking');
                    WhiteLatestMove = moment();
                    BlackTimer = setInterval(function() {
                        updateClock(o.BLACK);
                    }, 1000);
                } else {
                    if (NowTime.isAfter(WhiteLatestMove)) {
                        BlackElapsed = Duration.parse((BlackElapsed.milliseconds() + moment().diff(NowTime).valueOf())+'ms');
                    } else {
                        BlackElapsed = Duration.parse((BlackElapsed.milliseconds() + moment().diff(WhiteLatestMove).valueOf())+'ms');
                    }
                    clearInterval(BlackTimer);
                    $('#blackclock').removeClass('clocking');
                    $('#whiteclock').addClass('clocking');
                    BlackLatestMove = moment();
                    WhiteTimer = setInterval(function() {
                        updateClock(o.WHITE);
                    }, 1000);
                }
            }
        }
        for (var point in diff) {
            var index = addrStringToIndex(point);
            if (diff[point].Kind == 0) {
                unsetPieceImage(index);
            } else {
                setPieceImage(index, diff[point].Kind, diff[point].Orientation);
            }
            Board[index] = diff[point];
        }
        $(window).trigger('resize');
        $.get('/moves/'+game_id).done(function(data) {
            $('.selected').removeClass('selected');
            $('.hovered').removeClass('hovered');
            $('.hoveredopp').removeClass('hoveredopp');
            Selected = null;
            Moves = data;
            if ('check' in Moves) {
                $('#check').addClass('indicating');
            } else {
                $('#check').removeClass('indicating');
            }
            if ('checkmate' in Moves) {
                if ((TurnTime.milliseconds() > 0) || (TotalTime.milliseconds() > 0)) {
                    clearInterval(WhiteTimer);
                    clearInterval(BlackTimer);
                }
                if (Turn == o.WHITE) {
                    $('#whiteactive').removeClass('indicating');
                    $('#blackactive').addClass('indicating');
                } else {
                    $('#whiteactive').addClass('indicating');
                    $('#blackactive').removeClass('indicating');
                }
                $('#checkmate').addClass('indicating');
                $('#acknowledge').css('visibility', 'visible');
                return;
            } else if ('draw' in Moves) {
                if ((TurnTime.milliseconds() > 0) || (TotalTime.milliseconds() > 0)) {
                    clearInterval(WhiteTimer);
                    clearInterval(BlackTimer);
                }
                if (Turn == o.WHITE) {
                    $('#whiteactive').removeClass('indicating');
                    $('#blackactive').addClass('indicating');
                } else {
                    $('#whiteactive').addClass('indicating');
                    $('#blackactive').removeClass('indicating');
                }
                $('#draw').addClass('indicating');
                $('#acknowledge').css('visibility', 'visible');
                return;
            } else if ('time' in Moves) {
                clearInterval(BlackTimer);
                clearInterval(WhiteTimer);
                if (Turn == o.WHITE) {
                    $('#whiteactive').removeClass('indicating');
                    $('#blackactive').addClass('indicating');
                } else {
                    $('#whiteactive').addClass('indicating');
                    $('#blackactive').removeClass('indicating');
                }
                $('#time').addClass('indicating');
                $('#acknowledge').css('visibility', 'visible');
                return;
            }
            if ('promote' in Moves) {
                if (Turn == PlayerOrientation) {
                    if (White == Player) {
                        $('#whitepromote').html(promotionButtons);
                    } else {
                        $('#blackpromote').html(promotionButtons);
                    }
                }
            } else {
                $('#whitepromote').html('');
                $('#blackpromote').html('');
                if ((Turn == o.WHITE) && (Opponent != EasyComputer) && (Opponent != HardComputer)) {
                    $('#whiteactive').removeClass('indicating');
                    $('#blackactive').addClass('indicating');
                    Turn = o.BLACK;
                } else {
                    $('#whiteactive').addClass('indicating');
                    $('#blackactive').removeClass('indicating');
                    Turn = o.WHITE;
                }
            }
        });
        if (Muted == false) {
            $('#audio'+Math.floor(Math.random()*SoundCount)).get(0).play();
        }
    }
    function addrStringToIndex(str) {
        var address = str.split('-');
        return parseInt(address[0], 10) + (8 * parseInt(address[1], 10))
    }
    function indexToAddrString(i) {
        return (i%8).toString() + '-' + (Math.floor(i/8)).toString();
    }
    function millisecondsToClock(m) {
        var hours = Math.floor(m / (60*60*1000));
        if (hours != 0) {
            m -= hours * 60*60*1000;
        }
        var hourStr;
        if (hours < 10) {
            hourStr = '0'+hours;
        } else {
            hourStr = hours;
        }
        var minutes = Math.floor(m / (60*1000));
        if (minutes != 0) {
            m -= minutes * 60*1000;
        }
        var minuteStr;
        if (minutes < 10) {
            minuteStr = '0'+minutes;
        } else {
            minuteStr = minutes;
        }
        var seconds = Math.floor(m / 1000);
        var secondStr;
        if (seconds < 10) {
            secondStr = '0'+seconds;
        } else {
            secondStr = seconds;
        }
        return hourStr+':'+minuteStr+':'+secondStr;
    }
    function updateClock(orientation) {
        var clock, latestMove, elapsed;
        if (orientation == o.WHITE) {
            clock = '#whiteclock';
            latestMove = BlackLatestMove;
            elapsed = WhiteElapsed;
        } else {
            clock = '#blackclock';
            latestMove = WhiteLatestMove;
            elapsed = BlackElapsed;
        }
        var remaining;
        if (TurnTime.milliseconds() > 0) {
            remaining = TurnTime.milliseconds() - moment().subtract(NowDifference).diff(latestMove).valueOf();
        } else if (TotalTime.milliseconds() > 0) {
            if (NowTime.isAfter(latestMove)) {
                remaining = TotalTime.milliseconds() - (elapsed.milliseconds() + moment().diff(NowTime).valueOf());
            } else {
                remaining = TotalTime.milliseconds() - (elapsed.milliseconds() + moment().diff(latestMove).valueOf());
            }
        }
        $(clock).html(millisecondsToClock(remaining));
    }
    $(window).resize(function() {
        // 16px padding around the board and within each container
        var height = $(window).height();
        var width = $(window).width();
        var dim;
        if (width < height) {
            dim = width;
        } else {
            dim = height;
        }
        var squareDim = Math.floor((dim - 32) / 8);
        $('tr').css('height', squareDim);
        $('.point').css('width', squareDim);
        $('.pieceimg').css('width', squareDim).css('height', squareDim);
        $('#rightcontainer').css('width', $(window).width() - ((squareDim*8) + 100));
        $('.dataline').css('height', squareDim - 11);
        $('.dataline2').css('height', (squareDim - 11) * 2);
    });
    $(document).ready(function() {
        $('#acknowledge').css('visibility', 'hidden');
        for (var i = 0; i < SoundCount; i++) {
            $('#audio').append('<audio id="audio'+i+'"><source src="/sound/click'+i+'.wav" type="audio/wav"><source src="/sound/click'+i+'.ogg" type="audio/ogg"></audio>');
        }
        $('#movemute').click(function() {
            if (Muted == false) {
                $('#movemute').html('&#x1f507;');
                Muted = true;
            } else {
                $('#movemute').html('&#x1f50a;');
                Muted = false;
            }
        });
        if (TotalTime.milliseconds() > 0) {
            $('#backbutton').css('visibility', 'hidden');
        }
        var board = '';
        board += '<table id="grid">';
        for (var yrr = 7; yrr >= 0; yrr--) {
            board += '<tr>';
            for (var xcf = 0; xcf < 8; xcf++) {
                board += '<td id="point'+(xcf+(yrr*8))+'" class="point"></td>';
            }
            board += '</tr>';
        }
        board += '</table>';
        $('#board').html(board);
        for (var i = 0; i < 64; i++) {
            var y = Math.floor(i / 8);
            var x = i % 8;
            if ((y%2) == 0) {
                if ((x%2) == 0) {
                    $('#point'+i).addClass('even');
                } else {
                    $('#point'+i).addClass('odd');
                }
            } else {
                if ((x%2) == 0) {
                    $('#point'+i).addClass('odd');
                } else {
                    $('#point'+i).addClass('even');
                }
            }
        }
        $.get('/games/'+game_id).done(function(data) {
            Board = data.Points;
            White = data.White;
            Black = data.Black;
            if (White == Player) {
                Opponent = Black;
                PlayerOrientation = o.WHITE;
                $('#whitename').html('> '+{{.White}});
                $('#blackname').html({{.Black}});
            } else {
                Opponent = White;
                PlayerOrientation = o.BLACK;
                $('#blackname').html('> '+{{.Black}});
                $('#whitename').html({{.White}});
            }
            if (data.Active == White) {
                Turn = o.WHITE;
                $('#whiteactive').addClass('indicating');
            } else {
                Turn = o.BLACK;
                $('#blackactive').addClass('indicating');
            }
            if (TurnTime.milliseconds() > 0) {
                if (Turn == o.WHITE) {
                    $('#blackclock').html(millisecondsToClock(TurnTime.valueOf()-1000)).addClass('clock');
                    updateClock(o.WHITE);
                    $('#whiteclock').addClass('clock clocking');
                    WhiteTimer = setInterval(function() {
                        updateClock(o.WHITE);
                    }, 1000);
                } else {
                    $('#whiteclock').html(millisecondsToClock(TurnTime.valueOf()-1000)).addClass('clock');
                    updateClock(o.BLACK);
                    $('#blackclock').addClass('clock clocking');
                    BlackTimer = setInterval(function() {
                        updateClock(o.BLACK);
                    }, 1000);            
                }
            } else if (TotalTime.milliseconds() > 0) {
                var btime = TotalTime.milliseconds()-BlackElapsed.milliseconds()-1000;
                if (btime < 0) {
                    btime = 0;
                }
                var wtime = TotalTime.milliseconds()-WhiteElapsed.milliseconds()-1000;
                if (wtime < 0) {
                    wtime = 0;
                }
                $('#blackclock').html(millisecondsToClock(btime)).addClass('clock');
                $('#whiteclock').html(millisecondsToClock(wtime)).addClass('clock');
                if (Turn == o.WHITE) {
                    $('#whiteclock').addClass('clock clocking');
                    WhiteTimer = setInterval(function() {
                        updateClock(o.WHITE);
                    }, 1000);
                } else {
                    $('#blackclock').addClass('clock clocking');
                    BlackTimer = setInterval(function() {
                        updateClock(o.BLACK);
                    }, 1000);
                }
            } else {
                $('#blackclock').html(millisecondsToClock(0)).addClass('clock');
                $('#whiteclock').html(millisecondsToClock(0)).addClass('clock');
            }
            for (var i = 0; i < Board.length; i++) {
                if (Board[i].Kind == 0) {
                    continue;
                } else {
                    setPieceImage(i, Board[i].Kind, Board[i].Orientation);
                }
            }
            $(window).trigger('resize');
            $.get('/moves/'+game_id).done(function(data) {
                Moves = data;
                if ('check' in Moves) {
                    $('#check').addClass('indicating');
                } else {
                    $('#check').removeClass('indicating');
                }
                if ('checkmate' in Moves) {
                    if ((TurnTime.milliseconds() > 0) || (TotalTime.milliseconds() > 0)) {
                        clearInterval(BlackTimer);
                        clearInterval(WhiteTimer);
                    }
                    $('#checkmate').addClass('indicating');
                    $('#acknowledge').css('visibility', 'visible');
                } else if ('draw' in Moves) {
                if ((TurnTime.milliseconds() > 0) || (TotalTime.milliseconds() > 0)) {
                        clearInterval(BlackTimer);
                        clearInterval(WhiteTimer);
                    }
                    $('#draw').addClass('indicating');
                    $('#acknowledge').css('visibility', 'visible');
                } else if ('time' in Moves) {
                    clearInterval(BlackTimer);
                    clearInterval(WhiteTimer);
                    $('#time').addClass('indicating');
                    $('#acknowledge').css('visibility', 'visible');
                }
                if ('promote' in Moves) {
                    if (Turn == PlayerOrientation) {
                        if (White == Player) {
                            $('#whitepromote').html(promotionButtons);
                        } else {
                            $('#blackpromote').html(promotionButtons);
                        }
                    }
                } else {
                    $('#whitepromote').html('');
                    $('#blackpromote').html('');
                }
                for (var i = 0; i < 64; i++) {
                    $('#point'+i).click({Index: i}, function(event) {
                        var index = event.data.Index;
                        var className = '';
                        if ((Selected != index) && ($('#point'+index).hasClass('selected'))) {
                            if (Turn == PlayerOrientation) {
                                requestMove(Selected, index);
                            }
                            return;
                        }
                        if (Board[index].Kind == 0) {
                            return;
                        }
                        if (Moves[indexToAddrString(index)] == null) {
                            return;
                        }
                        if (Selected != null) {
                            if (Board[Selected].Orientation == PlayerOrientation) {
                                className = 'selected';
                            } else {
                                className = 'selectedopp';
                            }
                            $('#point'+Selected).removeClass(className);
                            for (var point in Moves[indexToAddrString(Selected)]) {
                                $('#point'+addrStringToIndex(point)).removeClass(className);
                            }
                            if (Selected == index) {
                                Selected = null;
                                return;
                            }
                        }
                        if (Board[index].Orientation == PlayerOrientation) {
                            className = 'selected';
                        } else {
                            className = 'selectedopp';
                        }
                        $('#point'+index).addClass(className);
                        for (var point in Moves[indexToAddrString(index)]) {
                            $('#point'+addrStringToIndex(point)).addClass(className);
                        }
                        Selected = index;
                    }).mouseenter({Index: i}, function(event) {
                        var index = event.data.Index;
                        var className;
                        if (Board[index].Kind == 0) {
                            return;
                        }
                        if (Moves[indexToAddrString(index)] == null) {
                            return;
                        }
                        if (Board[index].Orientation == PlayerOrientation) {
                            className = 'hovered';
                        } else {
                            className = 'hoveredopp';
                        }
                        $('#point'+index).addClass(className);
                        for (var point in Moves[indexToAddrString(index)]) {
                            $('#point'+addrStringToIndex(point)).addClass(className);
                        }
                    }).mouseleave({Index: i}, function(event) {
                        var index = event.data.Index;
                        var className;
                        if (Board[index].Kind == 0) {
                            return;
                        }
                        if (Moves[indexToAddrString(index)] == null) {
                            return;
                        }
                        if (Board[index].Orientation == PlayerOrientation) {
                            className = 'hovered';
                        } else {
                            className = 'hoveredopp';
                        }
                        $('#point'+index).removeClass(className);
                        for (var point in Moves[indexToAddrString(index)]) {
                            $('#point'+addrStringToIndex(point)).removeClass(className);
                        }
                    });
                }
            });
        });
    });
    function acknowledge() {
        jQuery.post('/acknowledge', {
            player: Player,
            gameid: game_id
        }).done(function() {
            window.location.pathname = '/';
        });
    }
    </script>
</head>

<body>
    <div id="board" class="container"></div>
    <!-- the right container stacks black player + clock, the game state indicator (check, checkmate, draw, time), a promotion option area / gained piece notification, the Acknowledge button, the Back button inline with the two sound buttons, and white player + clock -->
    <div id="rightcontainer" class="container">
        <div class="playerinfo" id="blackactive">
            <div class="playerinforow dataline">
                <div class="playerinfocell" id="blackname"></div>
            </div>
            <div class="playerinforow dataline">
                <div class="playerinfocell" id="blackclock"></div>
            </div>
        </div>
        <div id="indicators">
            <div class="indicatorrow">
                <div class="indicator dataline" id="check">Check</div>
                <div class="indicator dataline" id="checkmate">Checkmate</div>
            </div>
            <div class="indicatorrow">
                <div class="indicator dataline" id="draw">Draw</div>
                <div class="indicator dataline" id="time">Time</div>
            </div>
        </div>
        <div>
            <div class="inlinediv dataline2" id="gainedpiece"></div>
            <div class="inlinediv">
                <div id="acknowledge" class="dataline">
                    <input type="button" value="Acknowledge" onclick="acknowledge();"/>
                </div>
            <!-- <div id="whitepromote" class="promotion"></div> -->
                <div id="backandsound">
                    <div class="inlinediv dataline">
                        <input id="backbutton" type="button" value="Back" onclick="window.location.pathname = '/';"/>
                    </div>
                    <div id="soundbuttons" class="inlinediv">
                        <div id="movemute">&#x1f50a;</div>
                        <div id="musicmute">&#9835;</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="playerinfo" id="whiteactive">
            <div class="playerinforow dataline">
                <div class="playerinfocell" id="whitename"></div>
            </div>
            <div class="playerinforow dataline">
                <div class="playerinfocell" id="whiteclock"></div>
            </div>
        </div>
    </div>
    <div id="audio"></div>
</body>
</html>
